import{i as C,j as q,L as F,P as N,k as x,l,m as y,u as O,B as U,R as z,o as D,v as M,w as Y,x as $,y as L,z as j,A as G,C as T,D as H}from"./runtime.CujgLOHB.js";import{p as V}from"./proxy.BCqRXuL-.js";import{c as Z}from"./store.BVwix2HP.js";function g(a){for(var r=T,t=T;r!==null&&!(r.f&(U|z));)r=r.parent;try{return D(r),a()}finally{D(t)}}function W(a,r,t,v){var A;var I=(t&M)!==0,d=(t&Y)!==0,R=(t&$)!==0,w=(t&H)!==0,S=!1,u;R?[u,S]=Z(()=>a[r]):u=a[r];var s=(A=C(a,r))==null?void 0:A.set,n=v,c=!0,o=!1,p=()=>(o=!0,c&&(c=!1,w?n=O(v):n=v),n);u===void 0&&v!==void 0&&(s&&d&&q(),u=p(),s&&s(u));var f;if(d)f=()=>{var e=a[r];return e===void 0?p():(c=!0,o=!1,e)};else{var b=g(()=>(I?L:j)(()=>a[r]));b.f|=F,f=()=>{var e=l(b);return e!==void 0&&(n=void 0),e===void 0?n:e}}if(!(t&N))return f;if(s){var B=a.$$legacy;return function(e,i){return arguments.length>0?((!d||!i||B||S)&&s(i?f():e),e):f()}}var P=!1,h=!1,m=G(u),_=g(()=>L(()=>{var e=f(),i=l(m);return P?(P=!1,h=!0,i):(h=!1,m.v=e)}));return I||(_.equals=x),function(e,i){if(arguments.length>0){const E=i?l(_):d&&R?V(e):e;return _.equals(E)||(P=!0,y(m,E),o&&n!==void 0&&(n=E),O(()=>l(_))),e}return l(_)}}export{W as p};
