import{a9 as N,aa as Y,e as R,y as m,T as y,Y as M,ab as U,ac as j,ad as o,ae as x,g as d,X as z,af as $,ag as G,a2 as p,ah as H,ai as V,aj as X,j as q,ak as Z,F as k,z as B,al as J}from"./runtime.lwYzDcGd.js";import{p as K}from"./proxy.D4tmu_d7.js";import{c as Q}from"./store.BTNHnzk1.js";function D(a,r){return a===r||(a==null?void 0:a[y])===r}function ea(a={},r,i,v){return N(()=>{var s,f;return Y(()=>{s=f,f=[],R(()=>{a!==i(...f)&&(r(a,...f),s&&D(i(...s),a)&&r(null,...s))})}),()=>{m(()=>{f&&D(i(...f),a)&&r(null,...f)})}}),a}function F(a){for(var r=B,i=B;r!==null&&!(r.f&($|G));)r=r.parent;try{return p(r),a()}finally{p(i)}}function fa(a,r,i,v){var L;var s=(i&H)!==0,f=(i&V)!==0,O=(i&X)!==0,w=(i&J)!==0,T=!1,u;O?[u,T]=Q(()=>a[r]):u=a[r];var l=(L=M(a,r))==null?void 0:L.set,t=v,P=!0,S=!1,A=()=>(S=!0,P&&(P=!1,w?t=R(v):t=v),t);u===void 0&&v!==void 0&&(l&&f&&U(),u=A(),l&&l(u));var n;if(f)n=()=>{var e=a[r];return e===void 0?A():(P=!0,S=!1,e)};else{var b=F(()=>(s?q:Z)(()=>a[r]));b.f|=j,n=()=>{var e=d(b);return e!==void 0&&(t=void 0),e===void 0?t:e}}if(!(i&o))return n;if(l){var C=a.$$legacy;return function(e,_){return arguments.length>0?((!f||!_||C||T)&&l(_?n():e),e):n()}}var E=!1,g=!1,h=k(u),c=F(()=>q(()=>{var e=n(),_=d(h);return E?(E=!1,g=!0,_):(g=!1,h.v=e)}));return s||(c.equals=x),function(e,_){if(arguments.length>0){const I=_?d(c):f&&O?K(e):e;return c.equals(I)||(E=!0,z(h,I),S&&t!==void 0&&(t=I),R(()=>d(c))),e}return d(c)}}export{ea as b,fa as p};
