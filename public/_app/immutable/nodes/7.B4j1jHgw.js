import"../chunks/disclose-version.Bg9kRutz.js";import{p as R,t as C,a as X,l as t,m as d,at as f,c as a,s as r,r as e,au as ut,y as K,f as mt}from"../chunks/runtime.CujgLOHB.js";import{a as x,t as D,d as nt}from"../chunks/template.GUaYdGvl.js";import{i as pt}from"../chunks/lifecycle.JrtzkzPc.js";import{o as Y}from"../chunks/index-client.2-vHILIg.js";import{r as gt,s as P,I as k,T as ft}from"../chunks/Global.Pv3MWMcT.js";import{g as st,s as N,a as yt,d as _t}from"../chunks/Firebase.DSZICgop.js";import{b as bt}from"../chunks/input.1XdjuRsO.js";import{p}from"../chunks/proxy.BCqRXuL-.js";import{w as ht,g as wt}from"../chunks/index.fZE6by7T.js";import{e as rt,i as ot}from"../chunks/each.DfX4q5Xw.js";import{s as F}from"../chunks/render.DYv6prKW.js";import{i as dt}from"../chunks/if.Ck0J_65a.js";import{p as kt}from"../chunks/props.BinKfw78.js";const it=ht([]),Pt=l=>{it.update(s=>[...s,l])},At=()=>{let l=null;return it.update(s=>(l=s[0],s.slice(1))),l},St=()=>wt(it).length===0;function jt(l,s,i,u){l.preventDefault(),!(!t(s)&&!t(i))&&(t(i).play(),d(u,!t(u)),t(u)?t(s).pause():t(s).play())}function xt(l,s,i){l.preventDefault(),d(s,!t(s)),i()}function Dt(l,s){l.preventDefault(),d(s,!t(s))}var It=D('<section class="cassette svelte-dtyg94"><div class="cassette-body svelte-dtyg94"><div class="dots svelte-dtyg94"></div> <div class="dots svelte-dtyg94"></div> <div class="dots svelte-dtyg94"></div> <div class="dots svelte-dtyg94"></div> <div class="label svelte-dtyg94"><div class="label-descp svelte-dtyg94"><div class="line svelte-dtyg94"></div> <div class="line svelte-dtyg94"></div></div> <div class="player svelte-dtyg94"><div class="tape svelte-dtyg94"><div class="circle svelte-dtyg94" id="circle1"><div class="teeth svelte-dtyg94"></div> <div class="teeth svelte-dtyg94"></div> <div class="teeth svelte-dtyg94"></div> <div class="teeth svelte-dtyg94"></div></div> <div class="visor svelte-dtyg94"><div class="left-reel reel svelte-dtyg94"></div> <div class="right-reel reel svelte-dtyg94"></div></div> <div class="circle svelte-dtyg94" id="circle2"><div class="teeth svelte-dtyg94"></div> <div class="teeth svelte-dtyg94"></div> <div class="teeth svelte-dtyg94"></div> <div class="teeth svelte-dtyg94"></div></div></div></div> <div class="label-color svelte-dtyg94"></div></div></div> <div class="media-controls svelte-dtyg94"><div class="playback-control svelte-dtyg94"><button class="control-button svelte-dtyg94"><img class="icon svelte-dtyg94" alt="playback control"></button></div> <div class="volume-control svelte-dtyg94"><button class="control-button svelte-dtyg94"><img class="icon svelte-dtyg94" alt="volume control"></button> <input type="range" min="0" max="100" class="volume-slider svelte-dtyg94"></div> <div class="shuffle-control svelte-dtyg94"><button class="control-button svelte-dtyg94"><img class="icon svelte-dtyg94" alt="shuffle control"></button></div></div></section>');function $t(l,s){R(s,!0);const i="/audio/default.mp3",u="/audio/tape.mp3";let n=f(50),c=f(!1),m=f(!0),_=f(!1),o=f(null),b=f(null),g=f(0),y=K(()=>[{animationPlayState:`${t(m)?"paused":"running"}`,animationDuration:`${Math.round(t(g))}s`},{animationPlayState:`${t(m)?"paused":"running"}`,animationDuration:`${Math.round(t(g))}s`}]),Q=K(A),U=K(v),h=K(S);function v(){return t(m)?k.playerPlay:k.playerPause}function A(){if(w(),t(c))return k.volumeMute;if(t(n)===0)return k.volumeNone;if(t(n)<=50)return k.volumeLow;if(t(n)>50)return k.volumeHigh}function S(){return t(_)?k.playerShuffleOn:k.playerShuffleOff}function w(){t(o)&&(t(c)?t(o).volume=0:t(o).volume=t(n)/100)}function I(){const at=At();return st(at.trackPath,at.fileName)}Y(()=>(St()?d(o,p(new Audio(i))):(d(o,p(new Audio)),t(o).src=I()),d(b,p(new Audio(u))),t(b).volume=.25,d(g,p(Math.round(t(o).duration))),t(o).addEventListener("loadedmetadata",()=>{d(g,p(Math.round(t(o).duration)))}),()=>{t(o).stop,t(o).pause(),t(o).src="",d(o,null),t(b).pause(),t(b).src="",d(b,null)}));var j=It(),O=a(j),$=r(a(O),8),V=r(a($),2),J=a(V),W=a(J),L=r(W,2),q=a(L),T=r(q,2);e(L);var B=r(L,2);e(J),e(V),ut(2),e($),e(O);var Z=r(O,2),E=a(Z),H=a(E);H.__click=[jt,o,b,m];var G=a(H);e(H),e(E);var z=r(E,2),M=a(z);M.__click=[xt,c,w];var lt=a(M);e(M);var tt=r(M,2);gt(tt),e(z);var vt=r(z,2),et=a(vt);et.__click=[Dt,_];var ct=a(et);e(et),e(vt),e(Z),e(j),C(()=>{N(W,"animation-play-state",t(y)[0].animationPlayState),N(q,"animation-duration",t(y)[0].animationDuration),N(q,"animation-play-state",t(y)[0].animationPlayState),N(T,"animation-duration",t(y)[1].animationDuration),N(T,"animation-play-state",t(y)[1].animationPlayState),N(B,"animation-play-state",t(y)[1].animationPlayState),P(G,"src",t(U)),P(G,"title",t(m)?"Music Paused":"Music Playing"),P(M,"title",t(c)?"Music Muted":"Music Unmuted"),P(lt,"src",t(Q)),tt.disabled=t(c),P(tt,"title",t(n)),P(et,"title",t(_)?"Shuffling Enabled":"Shuffling Disabled"),P(ct,"src",t(h))}),bt(tt,()=>t(n),at=>d(n,at)),x(l,j),X()}nt(["click"]);function Mt(l,s){l.preventDefault(),d(s,!t(s))}var Nt=(l,s,i)=>s(t(i)),Ct=D('<div class="widget-song svelte-p3nscn"><div class="widget-song-info item1 svelte-p3nscn"><div class="widget-song-name svelte-p3nscn"><h4> </h4></div></div> <div class="widget-song-util item2 svelte-p3nscn"><p> </p> <button class="add-to-queue-button svelte-p3nscn"><img class="icon svelte-p3nscn" alt="Add to Playlist"></button></div> <div class="widget-song-info item3 svelte-p3nscn"><div class="widget-song-descr svelte-p3nscn"><p> </p></div></div></div>'),Ot=D('<div class="album-widget-title svelte-p3nscn"><h2> </h2></div> <div class="widget-content svelte-p3nscn"></div>',1),Et=D('<div class="album-widget svelte-p3nscn"><div class="album-widget-cover svelte-p3nscn"><img class="album-cover svelte-p3nscn" alt="Album Cover"> <button class="widget-extend-button svelte-p3nscn" aria-label="Playlist add Button"></button></div> <!></div>');function Qt(l,s){R(s,!0);let i=kt(s,"album",19,()=>[]),u=f(p(k.loadingIcon)),n=f(!1),c=K(()=>({height:t(n)?"fit-content":"8rem",width:t(n)?"90vw":"8rem",padding:(t(n),0)}));function m(v){const A=Math.floor(v/60),S=v%60,w=String(A).padStart(2,"0"),I=String(S).padStart(2,"0");return`${w}:${I}`}function _(){return i()[0].trackPath.slice(i()[0].trackPath.indexOf("/")+1,i()[0].trackPath.lastIndexOf("/"))}function o(v){Pt(v)}async function b(){const v=new Image;await st(i()[0].artworkPath,"art.png").then(A=>{v.src=A}),v.onload=()=>{d(u,p(v.src))}}Y(()=>{b()});var g=Et(),y=a(g),Q=a(y),U=r(Q,2);U.__click=[Mt,n],e(y);var h=r(y,2);dt(h,()=>t(n),v=>{var A=Ot(),S=mt(A),w=a(S),I=a(w,!0);C(()=>F(I,_())),e(w),e(S);var j=r(S,2);rt(j,21,i,ot,(O,$)=>{var V=Ct(),J=a(V),W=a(J),L=a(W),q=a(L);e(L),e(W),e(J);var T=r(J,2),B=a(T),Z=a(B,!0);C(()=>F(Z,m(t($).trackDuration))),e(B);var E=r(B,2);E.__click=[Nt,o,$];var H=a(E);e(E),e(T);var G=r(T,2),z=a(G),M=a(z),lt=a(M);e(M),e(z),e(G),e(V),C(()=>{F(q,`${t($).trackNumber??""} ${t($).trackName??""}`),P(H,"src",k.playlistAdd),F(lt,` Description: ${t($).trackDescription??""}`)}),x(O,V)}),e(j),x(v,A)}),e(g),C(()=>{N(g,"height",t(c).height),N(g,"width",t(c).width),P(Q,"src",t(u))}),x(l,g),X()}nt(["click"]);var Vt=D('<section class="song-selection svelte-14zdsoa"></section>');function Jt(l,s){R(s,!0);let i=f(p([]));async function u(){yt();try{const m=(await _t("releases")).map(async _=>(await fetch(_)).json());d(i,p(Object.values(await Promise.all(m))))}catch(c){console.error("Error fetching JSONs:",c),d(i,p([]))}}Y(()=>{u()});var n=Vt();rt(n,21,()=>t(i),ot,(c,m)=>{Qt(c,{get album(){return t(m)}})}),e(n),x(l,n),X()}function Lt(l,s){l.preventDefault(),d(s,!t(s))}var Tt=D('<div class="song-up-next svelte-1j5j7p8"><img class="song-album-cover svelte-1j5j7p8" alt="Song Album Cover"> <p> </p></div>'),zt=D('<div class="playlist-container svelte-1j5j7p8"></div>'),Ft=D('<section class="playlist svelte-1j5j7p8"><div class="song-up-next-container svelte-1j5j7p8"><h2 class="svelte-1j5j7p8">Up Next:</h2> <div class="song-up-next svelte-1j5j7p8"><img class="song-album-cover svelte-1j5j7p8" alt="Song Album Cover"> <p> </p></div> <button class="view-playlist-button svelte-1j5j7p8">View Playlist</button></div> <!></section>');function Ut(l,s){R(s,!0);let i=f(p([{trackName:null,artworkPath:null}])),u=f(!1),n=f(p(k.loadingIcon));async function c(){const h=new Image;await st(t(i)[0].artworkPath,"art.png").then(v=>{h.src=v}),h.onload=()=>{d(n,p(h.src))}}Y(()=>{const h=it.subscribe(v=>{d(i,p(v)),console.log(v),c()});return()=>{h()}});var m=Ft(),_=a(m),o=r(a(_),2),b=a(o),g=r(b,2),y=a(g,!0);e(g),e(o);var Q=r(o,2);Q.__click=[Lt,u],e(_);var U=r(_,2);dt(U,()=>t(u),h=>{var v=zt();rt(v,21,()=>t(i),ot,(A,S)=>{var w=Tt(),I=a(w);C(()=>P(I,"src",st(t(S).artworkPath,"art.png")));var j=r(I,2),O=a(j,!0);e(j),e(w),C(()=>F(O,t(S).trackName)),x(A,w)}),e(v),x(h,v)}),e(m),C(()=>{P(b,"src",t(n)),F(y,t(i)[0].trackName)}),x(l,m),X()}nt(["click"]);var Wt=D('<section class="music svelte-1jufzm6"><!> <!> <!></section>');function le(l,s){R(s,!1),Y(()=>{document.title=ft.music}),pt();var i=Wt(),u=a(i);$t(u,{});var n=r(u,2);Ut(n,{});var c=r(n,2);Jt(c,{}),e(i),x(l,i),X()}export{le as component};
