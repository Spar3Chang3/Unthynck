import"../chunks/disclose-version.Bg9kRutz.js";import"../chunks/legacy.CtaTdtmd.js";import{a1 as O,a2 as F,a5 as E,a6 as Q,g as t,Z as c,a8 as f,a3 as v,a7 as i,aa as a,aw as wt,k as Z,b as St}from"../chunks/index-client.CHxRNfLn.js";import{i as K,a as q,t as D}from"../chunks/template.BBsDH0qk.js";import{i as Pt}from"../chunks/lifecycle.C8kLH1f3.js";import{s as V}from"../chunks/render.CvTPB3-6.js";import{r as At,a as A,s as P,I as S,T as xt}from"../chunks/index.ceLrBuKH.js";import{b as qt}from"../chunks/input.Cka1-gbJ.js";import{p as g}from"../chunks/proxy.DLfti-hq.js";import{g as mt,b as Dt,d as It}from"../chunks/firebase.-1CFgVdz.js";import{w as zt,g as Nt}from"../chunks/index.B5OfHpNx.js";import{e as pt,i as ft}from"../chunks/each.DGSep0UY.js";import{i as _t}from"../chunks/if.DML_PgDJ.js";import{p as G}from"../chunks/props.DNKNdPue.js";import{t as Mt}from"../chunks/class.Bvena8yX.js";const J=zt([]),jt=s=>{J.update(e=>[...e,s])},Tt=()=>{let s=null;return J.update(e=>(s=e[0],e.slice(1))),s},Ct=s=>{console.log(s),J.update(e=>(e.splice(s,1),e))},ut=()=>Nt(J).length===0;function Et(s,e,o,d){s.preventDefault(),!(!t(e)&&!t(o)||ut()&&t(e).currentTime===t(e).duration)&&(t(o).play(),c(d,!t(d)),t(d)?t(e).pause():t(e).play())}function Vt(s,e,o){s.preventDefault(),c(e,!t(e)),o()}function Ot(s,e){s.preventDefault(),c(e,!t(e))}var Qt=D('<section class="cassette svelte-1p8w5ta" id="cassette"><div class="cassette-body svelte-1p8w5ta"><div class="dots svelte-1p8w5ta"></div> <div class="dots svelte-1p8w5ta"></div> <div class="dots svelte-1p8w5ta"></div> <div class="dots svelte-1p8w5ta"></div> <div class="label svelte-1p8w5ta"><div class="label-descp svelte-1p8w5ta"><div class="line svelte-1p8w5ta"></div> <div class="song-name svelte-1p8w5ta"><h3 class="svelte-1p8w5ta"> </h3></div> <div class="line svelte-1p8w5ta"></div></div> <div class="player svelte-1p8w5ta"><div class="tape svelte-1p8w5ta"><div class="circle svelte-1p8w5ta" id="circle1"><div class="teeth svelte-1p8w5ta"></div> <div class="teeth svelte-1p8w5ta"></div> <div class="teeth svelte-1p8w5ta"></div> <div class="teeth svelte-1p8w5ta"></div></div> <div class="visor svelte-1p8w5ta"><div class="left-reel reel svelte-1p8w5ta"></div> <div class="right-reel reel svelte-1p8w5ta"></div></div> <div class="circle svelte-1p8w5ta" id="circle2"><div class="teeth svelte-1p8w5ta"></div> <div class="teeth svelte-1p8w5ta"></div> <div class="teeth svelte-1p8w5ta"></div> <div class="teeth svelte-1p8w5ta"></div></div></div></div> <div class="label-color svelte-1p8w5ta"></div></div></div> <div class="media-controls svelte-1p8w5ta"><div class="playback-control svelte-1p8w5ta"><button class="control-button svelte-1p8w5ta"><img class="icon svelte-1p8w5ta" alt="playback control"></button></div> <div class="volume-control svelte-1p8w5ta"><button class="control-button svelte-1p8w5ta"><img class="icon svelte-1p8w5ta" alt="volume control"></button> <input type="range" min="0" max="100" class="volume-slider svelte-1p8w5ta"></div> <div class="shuffle-control svelte-1p8w5ta"><button class="control-button svelte-1p8w5ta"><img class="icon svelte-1p8w5ta" alt="shuffle control"></button></div></div></section>');function Bt(s,e){O(e,!0);const o="/audio/default.mp3",d="/audio/tape.mp3";let u=f(50),r=f(!1),l=f(!0),m=f(!1),n=f(null),b=f(null),w=f(0),_=f(void 0),k=f(void 0),h=Z(()=>[{animationPlayState:`${t(l)?"paused":"running"}`,animationDuration:`${Math.round(t(w))}s`},{animationPlayState:`${t(l)?"paused":"running"}`,animationDuration:`${Math.round(t(w))}s`}]),I=Z(nt),ot=Z(X),N=Z(M);function X(){return t(l)?S.playerPlay:S.playerPause}function nt(){if(tt(),t(r))return S.volumeMute;if(t(u)===0)return S.volumeNone;if(t(u)<=50)return S.volumeLow;if(t(u)>50)return S.volumeHigh}function M(){return t(m)?S.playerShuffleOn:S.playerShuffleOff}function tt(){t(n)&&(t(r)?t(n).volume=0:t(n).volume=t(u)/100)}async function et(){if(ut())return;const C=Tt();c(_,g(C.fileName)),await mt(C.trackPath,C.fileName).then(dt=>{t(n).src=dt}),c(l,!1),t(n).play()}F(()=>{ut()?c(n,g(new Audio(o))):(c(n,g(new Audio)),et());const C=J.subscribe(dt=>{c(k,g(dt))});return c(b,g(new Audio(d))),t(b).volume=.5,c(w,g(Math.round(t(n).duration))),t(n).addEventListener("loadedmetadata",()=>{c(w,g(Math.round(t(n).duration)))}),t(n).addEventListener("ended",()=>{c(l,!0),et()}),()=>{t(n).stop,t(n).pause(),t(n).src="",c(n,null),t(b).pause(),t(b).src="",c(b,null),C()}});var p=Qt(),y=i(p),z=v(i(y),8),x=i(z),j=v(i(x),2),W=i(j),rt=i(W,!0);a(W),a(j),wt(2),a(x);var B=v(x,2),L=i(B),at=i(L),T=v(at,2),U=i(T),$=v(U,2);a(T);var it=v(T,2);a(L),a(B),wt(2),a(z),a(y);var H=v(y,2),R=i(H),vt=i(R);vt.__click=[Et,n,b,l];var gt=i(vt);a(vt),a(R);var ct=v(R,2),Y=i(ct);Y.__click=[Vt,r,tt];var yt=i(Y);a(Y);var st=v(Y,2);At(st),a(ct);var bt=v(ct,2),lt=i(bt);lt.__click=[Ot,m];var kt=i(lt);a(lt),a(bt),a(H),a(p),E(()=>{V(rt,t(_)),A(at,"animation-play-state",t(h)[0].animationPlayState),A(U,"animation-duration",t(h)[0].animationDuration),A(U,"animation-play-state",t(h)[0].animationPlayState),A($,"animation-duration",t(h)[1].animationDuration),A($,"animation-play-state",t(h)[1].animationPlayState),A(it,"animation-play-state",t(h)[1].animationPlayState),P(gt,"src",t(ot)),P(gt,"title",t(l)?"Music Paused":"Music Playing"),P(Y,"title",t(r)?"Music Muted":"Music Unmuted"),P(yt,"src",t(I)),st.disabled=t(r),P(st,"title",t(u)),P(lt,"title",t(m)?"Shuffling Enabled":"Shuffling Disabled"),P(kt,"src",t(N))}),qt(st,()=>t(u),C=>c(u,C)),q(s,p),Q()}K(["click"]);var Lt=D('<div class="toast svelte-1jr4fjx"> </div>');function Ft(s,e){O(e,!0);let o=G(e,"message",3,""),d=G(e,"duration",3,3e3),u=G(e,"onClose",3,()=>{}),r=f(!0);F(()=>{const n=setTimeout(()=>{c(r,!1),u()()},d());return()=>clearTimeout(n)});var l=Lt(),m=i(l,!0);a(l),E(()=>{Mt(l,"visible",t(r)),V(m,o())}),q(s,l),Q()}function Jt(s,e,o){s.preventDefault(),c(e,!t(e)),document.getElementById(o.index).querySelector(".widget-content").scrollIntoView({behavior:"smooth",block:"center"})}var Wt=(s,e,o)=>e(t(o)),Ut=D('<div class="widget-song svelte-qzf8lo"><div class="widget-song-info item1 svelte-qzf8lo"><div class="widget-song-name svelte-qzf8lo"><h4> </h4></div></div> <div class="widget-song-util item2 svelte-qzf8lo"><p> </p> <button class="add-to-queue-button svelte-qzf8lo"><img class="icon svelte-qzf8lo" alt="Add to Playlist"></button></div> <div class="widget-song-info item3 svelte-qzf8lo"><div class="widget-song-descr svelte-qzf8lo"><p> </p></div></div></div>'),$t=D('<div class="album-widget svelte-qzf8lo"><div class="album-widget-cover svelte-qzf8lo"><img class="album-cover svelte-qzf8lo" alt="Album Cover"> <button class="widget-extend-button svelte-qzf8lo" aria-label="Playlist add Button"></button></div> <div class="album-widget-title svelte-qzf8lo"><h2> </h2></div> <div class="widget-content svelte-qzf8lo"></div> <!></div>');function Ht(s,e){O(e,!0);let o=G(e,"album",19,()=>[]),d=f(!1),u=f("???"),r=f(g(S.loadingIcon)),l=f(!1),m=Z(()=>({height:t(l)?"fit-content":"8rem",width:t(l)?"90vw":"8rem",padding:(t(l),0)}));function n(p){const y=Math.floor(p/60),z=p%60,x=String(y).padStart(2,"0"),j=String(z).padStart(2,"0");return`${x}:${j}`}function b(){return o()[0].trackPath.slice(o()[0].trackPath.indexOf("/")+1,o()[0].trackPath.lastIndexOf("/"))}function w(p){jt(p),c(u,g(p.trackName)),c(d,!0)}async function _(){const p=new Image;await mt(o()[0].artworkPath,"art.png").then(y=>{p.src=y}),p.onload=()=>{c(r,g(p.src))}}F(()=>{_()});var k=$t(),h=i(k),I=i(h),ot=v(I,2);ot.__click=[Jt,l,e],a(h);var N=v(h,2),X=i(N),nt=i(X,!0);E(()=>V(nt,b())),a(X),a(N);var M=v(N,2);pt(M,21,o,ft,(p,y)=>{var z=Ut(),x=i(z),j=i(x),W=i(j),rt=i(W);a(W),a(j),a(x);var B=v(x,2),L=i(B),at=i(L,!0);E(()=>V(at,n(t(y).trackDuration))),a(L);var T=v(L,2);T.__click=[Wt,w,y];var U=i(T);a(T),a(B);var $=v(B,2),it=i($),H=i(it),R=i(H);a(H),a(it),a($),a(z),E(()=>{V(rt,`${t(y).trackNumber??""} ${t(y).trackName??""}`),P(U,"src",S.playlistAdd),V(R,` Description: ${t(y).trackDescription??""}`)}),q(p,z)}),a(M);var tt=v(M,2);{var et=p=>{Ft(p,{get message(){return`Added ${t(u)??""} to queue`},duration:3e3,onClose:()=>c(d,!1)})};_t(tt,p=>{t(d)&&p(et)})}a(k),E(()=>{P(k,"id",e.index),A(k,"height",t(m).height),A(k,"width",t(m).width),P(I,"src",t(r)),A(N,"opacity",t(l)?1:0),A(N,"visibility",t(l)?"visible":"hidden"),A(M,"opacity",t(l)?1:0),A(M,"visibility",t(l)?"visible":"hidden")}),q(s,k),Q()}K(["click"]);var Rt=D('<section class="song-selection svelte-iz9k93" id="song-selection"></section>');function Yt(s,e){O(e,!0);let o=f(g([]));async function d(){Dt();try{const l=(await It("releases")).map(async m=>(await fetch(m)).json());c(o,g(Object.values(await Promise.all(l))))}catch(r){console.error("Error fetching JSONs:",r),c(o,g([]))}}F(()=>{d()});var u=Rt();pt(u,21,()=>t(o),ft,(r,l,m)=>{Ht(r,{get album(){return t(l)},index:m})}),a(u),q(s,u),Q()}function Zt(s,e){s.preventDefault(),Ct(e.index)}var Gt=D('<div class="song-widget svelte-1u0pgno"><div class="song-widget-art-container svelte-1u0pgno"><img class="song-widget-art svelte-1u0pgno" alt="Song Album Cover"></div> <div class="song-widget-utils svelte-1u0pgno"><p> </p> <button class="dequeue-song-button svelte-1u0pgno"><img class="icon svelte-1u0pgno" alt="Dequeue Song"></button></div></div>');function ht(s,e){O(e,!0);let o=f(g(S.loadingIcon)),d=G(e,"song",27,()=>g({trackName:"Nothing Selected Yet :("}));async function u(){const h=new Image;await mt(d().artworkPath,"art.png").then(I=>{h.src=I}),h.onload=()=>{c(o,g(h.src))}}St(()=>{d().artworkPath&&u()});var r=Gt(),l=i(r),m=i(l);a(l);var n=v(l,2),b=i(n),w=i(b,!0);a(b);var _=v(b,2);_.__click=[Zt,e];var k=i(_);a(_),a(n),a(r),E(()=>{P(m,"src",t(o)),V(w,d().trackName),P(k,"src",S.playlistRemove)}),q(s,r),Q()}K(["click"]);function Kt(s,e){s.preventDefault(),c(e,!t(e))}var Xt=D('<div class="playlist-container svelte-1b48urd"></div>'),te=D('<section class="playlist svelte-1b48urd"><div class="song-up-next-container svelte-1b48urd"><h2 class="svelte-1b48urd">Up Next:</h2> <!> <button class="view-playlist-button svelte-1b48urd">View Playlist</button></div> <!></section>');function ee(s,e){O(e,!0);let o=f(g([{trackName:null,artworkPath:null}])),d=f(!1);F(()=>{const w=J.subscribe(_=>{c(o,g(_))});return()=>{w()}});var u=te(),r=i(u),l=v(i(r),2);ht(l,{get song(){return t(o)[0]},set song(w){t(o)[0]=w}});var m=v(l,2);m.__click=[Kt,d],a(r);var n=v(r,2);{var b=w=>{var _=Xt();pt(_,21,()=>t(o),ft,(k,h,I)=>{ht(k,{get song(){return t(h)},index:I})}),a(_),q(w,_)};_t(n,w=>{t(d)&&w(b)})}a(u),q(s,u),Q()}K(["click"]);function ae(s){s.preventDefault(),document.getElementById("song-selection").scrollIntoView({behavior:"smooth",block:"end"})}function ie(s){s.preventDefault(),document.getElementById("cassette").scrollIntoView({behavior:"smooth",block:"end"})}var se=D('<section class="music svelte-ukcnmq"><div class="interact-tip svelte-ukcnmq"><h2>Add a song to the playlist to get started</h2> <button class="song-selection-jump jump svelte-ukcnmq">&darr;</button></div> <!> <!> <!> <div class="jump-to-top svelte-ukcnmq"><button class="cassette-jump jump svelte-ukcnmq">&uarr;</button></div></section>');function _e(s,e){O(e,!1),F(()=>{document.title=xt.music}),Pt();var o=se(),d=i(o),u=v(i(d),2);u.__click=[ae],a(d);var r=v(d,2);Bt(r,{});var l=v(r,2);ee(l,{});var m=v(l,2);Yt(m,{});var n=v(m,2),b=i(n);b.__click=[ie],a(n),a(o),q(s,o),Q()}K(["click"]);export{_e as component};
