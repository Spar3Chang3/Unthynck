import"../chunks/disclose-version.Bg9kRutz.js";import{p as j,as as k,a as F,a0 as P,s as i,c,j as o,r as l,t as x}from"../chunks/runtime.8aERoiLu.js";import{s as O}from"../chunks/render.BjEt2VPh.js";import{i as N}from"../chunks/if.vGGyft-f.js";import{e as T,i as A}from"../chunks/each.BDlHyYkj.js";import{e as U,a as u,t as m}from"../chunks/template.tWMG4ekI.js";import{p}from"../chunks/proxy.DE6t_P0E.js";import{o as $}from"../chunks/index-client.8_MlTCsB.js";var I=m('<div class="results-section svelte-hnbvgp"><h2 class="svelte-hnbvgp">Parsed Tracks</h2> <pre class="svelte-hnbvgp"> </pre> <button class="svelte-hnbvgp">Copy JSON to Clipboard</button></div>'),W=m("<li> </li>"),q=m('<div class="results-section svelte-hnbvgp"><h2 class="svelte-hnbvgp">Uploaded Files</h2> <ul></ul></div>'),z=m('<main class="svelte-hnbvgp"><h1 class="svelte-hnbvgp">Music Directory Uploader</h1> <div class="upload-section svelte-hnbvgp"><label class="svelte-hnbvgp">Upload Music Directory</label> <input type="file" webkitdirectory directory="" multiple class="svelte-hnbvgp"></div> <!> <!></main>');function B(h,M){j(M,!0);let b=k(p([])),v=k(p([])),_=k(void 0);function D(r){return r.length===0?null:(r[0].webkitRelativePath||r[0].relativePath).split("/")[0].replace(/\s+/g,"")}async function E(r,e){return new Promise((a,n)=>{const t=r.name.replace(".mp3",""),s=t.indexOf(" "),y=t.slice(0,s),C=t.slice(s+1),d=new Audio(URL.createObjectURL(r));d.addEventListener("loadedmetadata",()=>{a({trackNumber:y,trackName:C,trackDuration:Math.round(d.duration),trackPath:`releases/${e}/music/${r.name}`,artworkPath:`releases/${e}/art/art.png`,trackDescription:""}),URL.revokeObjectURL(d.src)}),d.addEventListener("error",G=>{n(new Error("Error loading audio file"))})})}async function J(r){const e=Array.from(r.target.files);P(b,p(e));const a=D(e),n=e.filter(t=>t.name.endsWith(".mp3")).sort((t,s)=>t.name.localeCompare(s.name));try{const t=await Promise.all(n.map(s=>E(s,a)));P(v,p(t))}catch(t){console.error("Error parsing MP3 files",t)}}function L(){const r=JSON.stringify(o(v),null,2);o(_).writeText(r).then(()=>alert("JSON copied to clipboard!")).catch(e=>console.error("Error copying JSON:",e))}$(()=>{typeof navigator<"u"&&navigator.clipboard?P(_,p(navigator.clipboard)):console.warn("Clipboard API is not supported in this environment")});var g=z(),f=i(c(g),2),R=i(c(f),2);l(f);var w=i(f,2);N(w,()=>o(v).length>0,r=>{var e=I(),a=i(c(e),2),n=c(a,!0);x(()=>O(n,JSON.stringify(o(v),null,2))),l(a);var t=i(a,2);l(e),U("click",t,L),u(r,e)});var S=i(w,2);N(S,()=>o(b).length>0,r=>{var e=q(),a=i(c(e),2);T(a,21,()=>o(b),A,(n,t)=>{var s=W(),y=c(s,!0);l(s),x(()=>O(y,o(t).webkitRelativePath||o(t).relativePath)),u(n,s)}),l(a),l(e),u(r,e)}),l(g),U("change",R,J),u(h,g),F()}function te(h){B(h,{})}export{te as component};
