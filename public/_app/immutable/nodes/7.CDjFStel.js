import"../chunks/disclose-version.Bg9kRutz.js";import{p as z,t as T,a as F,k as t,o as c,at as p,c as a,s as v,r as s,au as kt,z as K,f as Pt,G as At}from"../chunks/runtime.D5Mm-hzT.js";import{a as A,t as S,d as nt}from"../chunks/template.xCgAhjl1.js";import{i as St}from"../chunks/lifecycle.CvZLfwe0.js";import{o as X}from"../chunks/index-client.Djpe44e6.js";import{s as V}from"../chunks/render.k5wGaj38.js";import{r as xt,s as w,I as _,T as Dt}from"../chunks/Global.CvFAx2xl.js";import{g as ut,s as I,a as It,d as Mt}from"../chunks/Firebase.DSZICgop.js";import{b as Nt}from"../chunks/input.CeXRBrai.js";import{p as g}from"../chunks/proxy.BmSYkIuj.js";import{w as $t,g as jt}from"../chunks/index.C4w1XdQw.js";import{e as mt,i as ft}from"../chunks/each.DJt6PIKn.js";import{i as bt}from"../chunks/if.Drh3nZbA.js";import{p as _t}from"../chunks/props.5dWkrpjM.js";const J=$t([]),Ot=l=>{J.update(e=>[...e,l])},Ct=()=>{let l=null;return J.update(e=>(l=e[0],e.slice(1))),l},Et=l=>{console.log(l),J.update(e=>(e.splice(l,1),e))},dt=()=>jt(J).length===0;function Qt(l,e,i,u){l.preventDefault(),!(!t(e)&&!t(i)||dt()&&t(e).currentTime===t(e).duration)&&(t(i).play(),c(u,!t(u)),t(u)?t(e).pause():t(e).play())}function Lt(l,e,i){l.preventDefault(),c(e,!t(e)),i()}function Tt(l,e){l.preventDefault(),c(e,!t(e))}var Vt=S('<section class="cassette svelte-3lskrs"><div class="cassette-body svelte-3lskrs"><div class="dots svelte-3lskrs"></div> <div class="dots svelte-3lskrs"></div> <div class="dots svelte-3lskrs"></div> <div class="dots svelte-3lskrs"></div> <div class="label svelte-3lskrs"><div class="label-descp svelte-3lskrs"><div class="line svelte-3lskrs"></div> <div class="song-name svelte-3lskrs"><h3 class="svelte-3lskrs"> </h3></div> <div class="line svelte-3lskrs"></div></div> <div class="player svelte-3lskrs"><div class="tape svelte-3lskrs"><div class="circle svelte-3lskrs" id="circle1"><div class="teeth svelte-3lskrs"></div> <div class="teeth svelte-3lskrs"></div> <div class="teeth svelte-3lskrs"></div> <div class="teeth svelte-3lskrs"></div></div> <div class="visor svelte-3lskrs"><div class="left-reel reel svelte-3lskrs"></div> <div class="right-reel reel svelte-3lskrs"></div></div> <div class="circle svelte-3lskrs" id="circle2"><div class="teeth svelte-3lskrs"></div> <div class="teeth svelte-3lskrs"></div> <div class="teeth svelte-3lskrs"></div> <div class="teeth svelte-3lskrs"></div></div></div></div> <div class="label-color svelte-3lskrs"></div></div></div> <div class="media-controls svelte-3lskrs"><div class="playback-control svelte-3lskrs"><button class="control-button svelte-3lskrs"><img class="icon svelte-3lskrs" alt="playback control"></button></div> <div class="volume-control svelte-3lskrs"><button class="control-button svelte-3lskrs"><img class="icon svelte-3lskrs" alt="volume control"></button> <input type="range" min="0" max="100" class="volume-slider svelte-3lskrs"></div> <div class="shuffle-control svelte-3lskrs"><button class="control-button svelte-3lskrs"><img class="icon svelte-3lskrs" alt="shuffle control"></button></div></div></section>');function zt(l,e){z(e,!0);const i="/audio/default.mp3",u="/audio/tape.mp3";let r=p(50),o=p(!1),d=p(!0),y=p(!1),n=p(null),f=p(null),m=p(0),h=p(void 0),x=p(void 0),k=K(()=>[{animationPlayState:`${t(d)?"paused":"running"}`,animationDuration:`${Math.round(t(m))}s`},{animationPlayState:`${t(d)?"paused":"running"}`,animationDuration:`${Math.round(t(m))}s`}]),W=K(j),b=K(M),D=K(U);function M(){return t(d)?_.playerPlay:_.playerPause}function j(){if(q(),t(o))return _.volumeMute;if(t(r)===0)return _.volumeNone;if(t(r)<=50)return _.volumeLow;if(t(r)>50)return _.volumeHigh}function U(){return t(y)?_.playerShuffleOn:_.playerShuffleOff}function q(){t(n)&&(t(o)?t(n).volume=0:t(n).volume=t(r)/100)}async function Z(){if(dt())return;const $=Ct();c(h,g($.fileName)),await ut($.trackPath,$.fileName).then(rt=>{t(n).src=rt}),c(d,!1),t(n).play()}X(()=>{dt()?c(n,g(new Audio(i))):(c(n,g(new Audio)),Z());const $=J.subscribe(rt=>{c(x,g(rt)),console.log(rt)});return c(f,g(new Audio(u))),t(f).volume=.5,c(m,g(Math.round(t(n).duration))),t(n).addEventListener("loadedmetadata",()=>{c(m,g(Math.round(t(n).duration)))}),t(n).addEventListener("ended",()=>{c(d,!0),Z()}),()=>{t(n).stop,t(n).pause(),t(n).src="",c(n,null),t(f).pause(),t(f).src="",c(f,null),$()}});var P=Vt(),N=a(P),O=v(a(N),8),C=a(O),B=v(a(C),2),tt=a(B),G=a(tt,!0);s(tt),s(B),kt(2),s(C);var E=v(C,2),et=a(E),Q=a(et),H=v(Q,2),L=a(H),R=v(L,2);s(H);var st=v(H,2);s(et),s(E),kt(2),s(O),s(N);var at=v(N,2),ot=a(at),vt=a(ot);vt.__click=[Qt,n,f,d];var gt=a(vt);s(vt),s(ot);var ct=v(ot,2),Y=a(ct);Y.__click=[Lt,o,q];var yt=a(Y);s(Y);var lt=v(Y,2);xt(lt),s(ct);var pt=v(ct,2),it=a(pt);it.__click=[Tt,y];var wt=a(it);s(it),s(pt),s(at),s(P),T(()=>{V(G,t(h)),I(Q,"animation-play-state",t(k)[0].animationPlayState),I(L,"animation-duration",t(k)[0].animationDuration),I(L,"animation-play-state",t(k)[0].animationPlayState),I(R,"animation-duration",t(k)[1].animationDuration),I(R,"animation-play-state",t(k)[1].animationPlayState),I(st,"animation-play-state",t(k)[1].animationPlayState),w(gt,"src",t(b)),w(gt,"title",t(d)?"Music Paused":"Music Playing"),w(Y,"title",t(o)?"Music Muted":"Music Unmuted"),w(yt,"src",t(W)),lt.disabled=t(o),w(lt,"title",t(r)),w(it,"title",t(y)?"Shuffling Enabled":"Shuffling Disabled"),w(wt,"src",t(D))}),Nt(lt,()=>t(r),$=>c(r,$)),A(l,P),F()}nt(["click"]);function Ft(l,e){l.preventDefault(),c(e,!t(e))}var Jt=(l,e,i)=>e(t(i)),Wt=S('<div class="widget-song svelte-mc8hk0"><div class="widget-song-info item1 svelte-mc8hk0"><div class="widget-song-name svelte-mc8hk0"><h4> </h4></div></div> <div class="widget-song-util item2 svelte-mc8hk0"><p> </p> <button class="add-to-queue-button svelte-mc8hk0"><img class="icon svelte-mc8hk0" alt="Add to Playlist"></button></div> <div class="widget-song-info item3 svelte-mc8hk0"><div class="widget-song-descr svelte-mc8hk0"><p> </p></div></div></div>'),Ut=S('<div class="album-widget-title svelte-mc8hk0"><h2> </h2></div> <div class="widget-content svelte-mc8hk0"></div>',1),qt=S('<div class="album-widget svelte-mc8hk0"><div class="album-widget-cover svelte-mc8hk0"><img class="album-cover svelte-mc8hk0" alt="Album Cover"> <button class="widget-extend-button svelte-mc8hk0" aria-label="Playlist add Button"></button></div> <!></div>');function Bt(l,e){z(e,!0);let i=_t(e,"album",19,()=>[]),u=p(g(_.loadingIcon)),r=p(!1),o=K(()=>({height:t(r)?"fit-content":"8rem",width:t(r)?"90vw":"8rem",padding:(t(r),0)}));function d(b){const D=Math.floor(b/60),M=b%60,j=String(D).padStart(2,"0"),U=String(M).padStart(2,"0");return`${j}:${U}`}function y(){return i()[0].trackPath.slice(i()[0].trackPath.indexOf("/")+1,i()[0].trackPath.lastIndexOf("/"))}function n(b){Ot(b)}async function f(){const b=new Image;await ut(i()[0].artworkPath,"art.png").then(D=>{b.src=D}),b.onload=()=>{c(u,g(b.src))}}X(()=>{f()});var m=qt(),h=a(m),x=a(h),k=v(x,2);k.__click=[Ft,r],s(h);var W=v(h,2);bt(W,()=>t(r),b=>{var D=Ut(),M=Pt(D),j=a(M),U=a(j,!0);T(()=>V(U,y())),s(j),s(M);var q=v(M,2);mt(q,21,i,ft,(Z,P)=>{var N=Wt(),O=a(N),C=a(O),B=a(C),tt=a(B);s(B),s(C),s(O);var G=v(O,2),E=a(G),et=a(E,!0);T(()=>V(et,d(t(P).trackDuration))),s(E);var Q=v(E,2);Q.__click=[Jt,n,P];var H=a(Q);s(Q),s(G);var L=v(G,2),R=a(L),st=a(R),at=a(st);s(st),s(R),s(L),s(N),T(()=>{V(tt,`${t(P).trackNumber??""} ${t(P).trackName??""}`),w(H,"src",_.playlistAdd),V(at,` Description: ${t(P).trackDescription??""}`)}),A(Z,N)}),s(q),A(b,D)}),s(m),T(()=>{I(m,"height",t(o).height),I(m,"width",t(o).width),w(x,"src",t(u))}),A(l,m),F()}nt(["click"]);var Gt=S('<section class="song-selection svelte-14zdsoa"></section>');function Ht(l,e){z(e,!0);let i=p(g([]));async function u(){It();try{const d=(await Mt("releases")).map(async y=>(await fetch(y)).json());c(i,g(Object.values(await Promise.all(d))))}catch(o){console.error("Error fetching JSONs:",o),c(i,g([]))}}X(()=>{u()});var r=Gt();mt(r,21,()=>t(i),ft,(o,d)=>{Bt(o,{get album(){return t(d)}})}),s(r),A(l,r),F()}function Rt(l,e){l.preventDefault(),Et(e.index)}var Yt=S('<div class="song-widget svelte-bg9dye"><div class="song-widget-art-container svelte-bg9dye"><img class="song-widget-art svelte-bg9dye" alt="Song Album Cover"></div> <div class="song-widget-utils svelte-bg9dye"><p> </p> <button class="dequeue-song-button svelte-bg9dye"><img class="icon svelte-bg9dye" alt="Dequeue Song"></button></div></div>');function ht(l,e){z(e,!0);let i=p(g(_.loadingIcon)),u=_t(e,"song",27,()=>g({trackName:"Nothing Selected Yet :("}));async function r(){const k=new Image;await ut(u().artworkPath,"art.png").then(W=>{k.src=W}),k.onload=()=>{c(i,g(k.src))}}At(()=>{r()});var o=Yt(),d=a(o),y=a(d);s(d);var n=v(d,2),f=a(n),m=a(f,!0);s(f);var h=v(f,2);h.__click=[Rt,e];var x=a(h);s(h),s(n),s(o),T(()=>{w(y,"src",t(i)),V(m,u().trackName),w(x,"src",_.playlistRemove)}),A(l,o),F()}nt(["click"]);function Kt(l,e){l.preventDefault(),c(e,!t(e))}var Xt=S('<div class="playlist-container svelte-1jawlly"></div>'),Zt=S('<section class="playlist svelte-1jawlly"><div class="song-up-next-container svelte-1jawlly"><h2 class="svelte-1jawlly">Up Next:</h2> <!> <button class="view-playlist-button svelte-1jawlly">View Playlist</button></div> <!></section>');function te(l,e){z(e,!0);let i=p(g([{trackName:null,artworkPath:null}])),u=p(!1);X(()=>{const f=J.subscribe(m=>{c(i,g(m)),console.log(m)});return()=>{f()}});var r=Zt(),o=a(r),d=v(a(o),2);ht(d,{get song(){return t(i)[0]},set song(f){t(i)[0]=f}});var y=v(d,2);y.__click=[Kt,u],s(o);var n=v(o,2);bt(n,()=>t(u),f=>{var m=Xt();mt(m,21,()=>t(i),ft,(h,x,k)=>{ht(h,{get song(){return t(x)},index:k})}),s(m),A(f,m)}),s(r),A(l,r),F()}nt(["click"]);var ee=S('<section class="music svelte-1jufzm6"><!> <!> <!></section>');function pe(l,e){z(e,!1),X(()=>{document.title=Dt.music}),St();var i=ee(),u=a(i);zt(u,{});var r=v(u,2);te(r,{});var o=v(r,2);Ht(o,{}),s(i),A(l,i),F()}export{pe as component};
